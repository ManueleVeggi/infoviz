<!DOCTYPE html>
<html>
<!-- https://jsfiddle.net/api/post/library/pure/ -->

<head>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>

<body>

    <div id="chart_div" style="height: 100%; margin: 0%"></div>
    <script>
        google.charts.load('current', {
            packages: ['corechart', 'bar']
        });
        google.charts.setOnLoadCallback(linedata);

        // Ancillary functions

        function findOcc(arr, key) {
            let arr2 = [];

            arr.forEach((x) => {

                // Checking if there is any object in arr2
                // which contains the key value
                if (arr2.some((val) => {
                        return val[key] == x[key]
                    })) {

                    // If yes! then increase the occurrence by 1
                    arr2.forEach((k) => {
                        if (k[key] === x[key]) {
                            k["occurrence"]++
                        }
                    })

                } else {
                    // If not! Then create a new object initialize 
                    // it with the present iteration key's value and 
                    // set the occurrence to 1
                    let a = {}
                    a[key] = x[key]
                    a["occurrence"] = 1
                    arr2.push(a);
                }
            })

            return arr2
        }

        function freqArray(arr) {
            let arrList = []

            arr.forEach((row) => {
                arrList.push({
                    artwork: row[0],
                    artist: row[1]
                })
            })

            arrList.shift();

            var finalData = [
                ["Artist", "Frequence"]
            ]

            findOcc(arrList, "artist").forEach((obj) => {
                if (obj["occurrence"] > 1) {
                    finalData.push(
                        [obj["artist"], obj["occurrence"]]
                    )
                }
            })

            return finalData
        }

        // Create visualization

        function linedata() {
            d3.csv("assets/dataForSite/exportCsv/metartworks.csv").then(drawViz);
        }

        function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Year', 'Sales', 'Expenses'],
          ['2004',  1000,      400],
          ['2005',  1170,      460],
          ['2006',  660,       1120],
          ['2007',  1030,      540]
        ]);

        var options = {
          title: 'Company Performance',
          curveType: 'function',
          legend: { position: 'bottom' }
        };

        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);
      }
</script>
</body>

</html>